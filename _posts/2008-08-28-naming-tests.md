---
layout: post
title: Naming tests
categories: []
tags:
- Design
- Unit Testing
status: publish
type: post
published: true
meta:
  _elasticsearch_indexed_on: '2008-08-28 22:35:00'
comments: true
---
<p>I try, as much as I can to practice TDD, because I truly believe that it helps me shape the design, and that is the primary objective of TDD, not tests. Testing is a nice side-effect. As such, tests serve as specifications; reading a test should give you a clear understanding of what the SUT does. However, reality is not always the case, so the more help you provide to your audience (including yourself), the better. Part of that resides in how you name your tests. </p><p><strong>Action_Result_Condition</strong></p><p>Let me first point out that I&#039;m not too fond of method names having underscores, but I do find it no doubt easier to read. Which do you find easier?</p><p><em>GetCustomerShouldReturnActiveCustomer</em></p><p>or</p><p><em>GetCustomer_Should_Return_Active_Customer</em></p><p>Before continuing, let me also say that in the context of non-test methods, if you need to use underscores for naming methods, you&#039;re probably doing way too much in the method to begin with and it could probably be re-factored. However, tests are a special case. </p><p>A test validates certain functionality under specific conditions (or lack of them). By indicating this in the test name, it makes it not only easier to understand the specification, but to also validate the actual test. Take the following example:</p><div style="font-size:8pt;width:97.5%;cursor:text;max-height:200px;line-height:12pt;font-family:consolas, 'Courier New', courier, monospace;background-color:#f4f4f4;border-color:gray;border-style:solid;border-width:1px;margin:20px 0 10px;padding:4px;"><div style="font-size:8pt;width:100%;color:black;line-height:12pt;font-family:consolas, 'Courier New', courier, monospace;background-color:#f4f4f4;border-style:none;padding:0;"><pre style="font-size:8pt;width:100%;color:black;line-height:12pt;font-family:consolas, 'Courier New', courier, monospace;background-color:white;border-style:none;margin:0;padding:0;"><span style="color:#606060;">   1:</span> [TestMethod]</pre><pre style="font-size:8pt;width:100%;color:black;line-height:12pt;font-family:consolas, 'Courier New', courier, monospace;background-color:#f4f4f4;border-style:none;margin:0;padding:0;"><span style="color:#606060;">   2:</span> <span style="color:#0000ff;">public</span> <span style="color:#0000ff;">void</span> ValidateGetActiveCustomer() {</pre><pre style="font-size:8pt;width:100%;color:black;line-height:12pt;font-family:consolas, 'Courier New', courier, monospace;background-color:white;border-style:none;margin:0;padding:0;"><span style="color:#606060;">   3:</span>&nbsp; </pre><pre style="font-size:8pt;width:100%;color:black;line-height:12pt;font-family:consolas, 'Courier New', courier, monospace;background-color:#f4f4f4;border-style:none;margin:0;padding:0;"><span style="color:#606060;">   4:</span> }</pre></div></div><p>without reading the code, you really don&#039;t know what that test is meant to do. All you know is that it validates a GetActiveCustomer. But under what conditions? Since the only reference you have is the code, if it&#039;s wrong, that is, the test is written incorrectly, you&#039;re pretty much lost. You&#039;re running that test and thinking all is ok when really it isn&#039;t. </p><p>Now let&#039;s take a look at the same test but with a different name</p><div style="font-size:8pt;width:97.5%;cursor:text;max-height:200px;line-height:12pt;font-family:consolas, 'Courier New', courier, monospace;background-color:#f4f4f4;border-color:gray;border-style:solid;border-width:1px;margin:20px 0 10px;padding:4px;"><div style="font-size:8pt;width:100%;color:black;line-height:12pt;font-family:consolas, 'Courier New', courier, monospace;background-color:#f4f4f4;border-style:none;padding:0;"><pre style="font-size:8pt;width:100%;color:black;line-height:12pt;font-family:consolas, 'Courier New', courier, monospace;background-color:white;border-style:none;margin:0;padding:0;"><span style="color:#606060;">   1:</span> [TestMethod]</pre><pre style="font-size:8pt;width:100%;color:black;line-height:12pt;font-family:consolas, 'Courier New', courier, monospace;background-color:#f4f4f4;border-style:none;margin:0;padding:0;"><span style="color:#606060;">   2:</span> <span style="color:#0000ff;">public</span> <span style="color:#0000ff;">void</span> GetActiveCustomer_Returns_Customer_When_Given_Valid_Id() {</pre><pre style="font-size:8pt;width:100%;color:black;line-height:12pt;font-family:consolas, 'Courier New', courier, monospace;background-color:white;border-style:none;margin:0;padding:0;"><span style="color:#606060;">   3:</span>&nbsp; </pre><pre style="font-size:8pt;width:100%;color:black;line-height:12pt;font-family:consolas, 'Courier New', courier, monospace;background-color:#f4f4f4;border-style:none;margin:0;padding:0;"><span style="color:#606060;">   4:</span> }</pre></div></div><p>This clearly indicates the intentions of the test. At first sight, without even looking at the code, you know what the test is trying to accomplish, and thus providing you a basis by which to validate the actual test code. </p><p>You could say that the name is too long. So? You short on bytes? Or on display settings? You could also argue that the <em>Returns_Active_Customer </em>is redundant. Sure, it might be in this case, but that&#039;s because <em>GetActiveCustomer</em> more or less indicates what that particular action should do. But there are cases when this does not apply. Let&#039;s look at another example</p><div style="font-size:8pt;width:97.5%;cursor:text;max-height:200px;line-height:12pt;font-family:consolas, 'Courier New', courier, monospace;background-color:#f4f4f4;border-color:gray;border-style:solid;border-width:1px;margin:20px 0 10px;padding:4px;"><div style="font-size:8pt;width:100%;color:black;line-height:12pt;font-family:consolas, 'Courier New', courier, monospace;background-color:#f4f4f4;border-style:none;padding:0;"><pre style="font-size:8pt;width:100%;color:black;line-height:12pt;font-family:consolas, 'Courier New', courier, monospace;background-color:white;border-style:none;margin:0;padding:0;"><span style="color:#606060;">   1:</span> [TestMethod]        </pre><pre style="font-size:8pt;width:100%;color:black;line-height:12pt;font-family:consolas, 'Courier New', courier, monospace;background-color:#f4f4f4;border-style:none;margin:0;padding:0;"><span style="color:#606060;">   2:</span> <span style="color:#0000ff;">public</span> <span style="color:#0000ff;">void</span> ValidateDeleteCustomer() {</pre><pre style="font-size:8pt;width:100%;color:black;line-height:12pt;font-family:consolas, 'Courier New', courier, monospace;background-color:white;border-style:none;margin:0;padding:0;"><span style="color:#606060;">   3:</span>         </pre><pre style="font-size:8pt;width:100%;color:black;line-height:12pt;font-family:consolas, 'Courier New', courier, monospace;background-color:#f4f4f4;border-style:none;margin:0;padding:0;"><span style="color:#606060;">   4:</span> }</pre></div></div><p><em>ValidateDeleteCustomer</em>, what does it do? When does it fail? When does it pass?</p><p>On the other hand, the following test is telling me not only under what conditions <em>DeleteCustomer </em>should work, but is also clearly indicating a requirement of the program: when a customer has no orders, you can delete it. </p><div style="font-size:8pt;width:97.5%;cursor:text;max-height:200px;line-height:12pt;font-family:consolas, 'Courier New', courier, monospace;background-color:#f4f4f4;border-color:gray;border-style:solid;border-width:1px;margin:20px 0 10px;padding:4px;"><div style="font-size:8pt;width:100%;color:black;line-height:12pt;font-family:consolas, 'Courier New', courier, monospace;background-color:#f4f4f4;border-style:none;padding:0;"><pre style="font-size:8pt;width:100%;color:black;line-height:12pt;font-family:consolas, 'Courier New', courier, monospace;background-color:white;border-style:none;margin:0;padding:0;"><span style="color:#606060;">   1:</span> [TestMethod]</pre><pre style="font-size:8pt;width:100%;color:black;line-height:12pt;font-family:consolas, 'Courier New', courier, monospace;background-color:#f4f4f4;border-style:none;margin:0;padding:0;"><span style="color:#606060;">   2:</span> <span style="color:#0000ff;">public</span> <span style="color:#0000ff;">void</span> DeleteCustomer_Deletes_Customer_When_Customer_Has_No_Orders()</pre><pre style="font-size:8pt;width:100%;color:black;line-height:12pt;font-family:consolas, 'Courier New', courier, monospace;background-color:white;border-style:none;margin:0;padding:0;"><span style="color:#606060;">   3:</span> {</pre><pre style="font-size:8pt;width:100%;color:black;line-height:12pt;font-family:consolas, 'Courier New', courier, monospace;background-color:#f4f4f4;border-style:none;margin:0;padding:0;"><span style="color:#606060;">   4:</span>     </pre><pre style="font-size:8pt;width:100%;color:black;line-height:12pt;font-family:consolas, 'Courier New', courier, monospace;background-color:white;border-style:none;margin:0;padding:0;"><span style="color:#606060;">   5:</span> }</pre></div></div><p>Here&#039;s another example:</p><div style="font-size:8pt;width:97.5%;cursor:text;max-height:200px;line-height:12pt;font-family:consolas, 'Courier New', courier, monospace;background-color:#f4f4f4;border-color:gray;border-style:solid;border-width:1px;margin:20px 0 10px;padding:4px;"><div style="font-size:8pt;width:100%;color:black;line-height:12pt;font-family:consolas, 'Courier New', courier, monospace;background-color:#f4f4f4;border-style:none;padding:0;"><pre style="font-size:8pt;width:100%;color:black;line-height:12pt;font-family:consolas, 'Courier New', courier, monospace;background-color:white;border-style:none;margin:0;padding:0;"><span style="color:#606060;">   1:</span> [TestMethod]</pre><pre style="font-size:8pt;width:100%;color:black;line-height:12pt;font-family:consolas, 'Courier New', courier, monospace;background-color:#f4f4f4;border-style:none;margin:0;padding:0;"><span style="color:#606060;">   2:</span> [ExpectedException(<span style="color:#0000ff;">typeof</span>(Exception))]</pre><pre style="font-size:8pt;width:100%;color:black;line-height:12pt;font-family:consolas, 'Courier New', courier, monospace;background-color:white;border-style:none;margin:0;padding:0;"><span style="color:#606060;">   3:</span> <span style="color:#0000ff;">public</span> <span style="color:#0000ff;">void</span> DeleteCustomer_When_Customer_Has_Orders_Throws_Exception() {</pre><pre style="font-size:8pt;width:100%;color:black;line-height:12pt;font-family:consolas, 'Courier New', courier, monospace;background-color:#f4f4f4;border-style:none;margin:0;padding:0;"><span style="color:#606060;">   4:</span>&nbsp; </pre><pre style="font-size:8pt;width:100%;color:black;line-height:12pt;font-family:consolas, 'Courier New', courier, monospace;background-color:white;border-style:none;margin:0;padding:0;"><span style="color:#606060;">   5:</span> }</pre><pre style="font-size:8pt;width:100%;color:black;line-height:12pt;font-family:consolas, 'Courier New', courier, monospace;background-color:#f4f4f4;border-style:none;margin:0;padding:0;"><span style="color:#606060;">   6:</span>&nbsp; </pre></div></div><p>Again, as with <em>GetActiveCustomer</em>, we know that this test throws an exception by looking at the test attribute. However, this is something we don&#039;t see in a test view/run. </p><p>Irrelevant of whether you use underscores or not, use long names or short names, what is also very important is to establish a convention and stick to it. At the very least, all tests in a project should follow the same convention, and if you can get a consensus with your team across different projects, even better.</p>
