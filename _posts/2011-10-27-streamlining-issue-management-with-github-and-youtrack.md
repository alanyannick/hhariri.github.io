---
layout: post
title: Streamlining Issue Management with GitHub and YouTrack
categories:
- JetBrains
tags:
- JetBrains
- YouTrack
status: publish
type: post
published: true
meta:
  reddit: a:2:{s:5:"count";i:0;s:4:"time";i:1385704301;}
  _elasticsearch_indexed_on: '2011-10-27 10:26:00'
---
<h3>The Typical Developer Workflow</h3> <p><img style="background-image:none;padding-left:0;padding-right:0;display:inline;padding-top:0;border-width:0;margin:10px 0 0;" title="image" border="0" alt="image" src="{{ site.images }}/sli-1.png" width="878" height="598"></p> <p><small>* Thanks to <a href="http://twitter.com/gregyoung">@gregyoung</a> for enriching me with <a href="http://www.whatthecommmit.com">whatthecommit.com</a> </small></p> <p><small></small></p> <p>In general, as developers we hate uninteresting tasks such as managing issues, so the less time and effort we spend in tracking bugs and features the better. The worse case scenario is the one outlined in the previous workflow, i.e. work on a bug, comment the fix in source control and then separately manage the issue in an issue tracker. Ideally, we’d like to only have to indicate what we’ve worked on and how it’s related to a check-in once! And fortunately with YouTrack, we can. However, YouTrack goes one step further. It actually allows us to control issues from our source control. Let’s see how this plays out when it comes to using GitHub.</p> <p>&nbsp;</p> <p>In essence we have two options when it comes to integration GitHub:</p> <ul> <li>Directly via GitHub Service Hooks.  <li>Use TeamCity as the gateway, which in itself offers other advantages (opening it up to other VCS’s too). </li></ul> <p>&nbsp;</p> <p>We’ll cover each of these in detail.</p> <h3>YouTrack and GitHub Service Hooks</h3> <p>Earlier this year, GitHub provided official support for YouTrack hooks, allowing for tight integration between the two systems. This makes it extremely easy to set up YouTrack for issue management.</p> <p>Assuming we have a project already set up on YouTrack and GitHub:</p> <p>1.&nbsp; Click on the project in GitHub and select <strong>Admin</strong></p> <p>2. Select the Service Hooks from the left-hand side menu</p> <p><img style="background-image:none;padding-left:0;padding-right:0;display:inline;padding-top:0;border-width:0;margin:10px 0 0;" title="image" border="0" alt="image" src="{{ site.images }}/sli-2.png" width="644" height="319"></p> <p>3. At the very bottom of the list of Service Hooks, select YouTrack</p> <p><img style="background-image:none;padding-left:0;padding-right:0;display:inline;padding-top:0;border-width:0;margin:10px 0 0;" title="image" border="0" alt="image" src="{{ site.images }}/sli-3.png" width="250" height="74"></p> <p>4. Enter the following information in the form provided</p> <p><img style="background-image:none;padding-left:0;padding-right:0;display:inline;padding-top:0;border-width:0;margin:10px 0 0;" title="image" border="0" alt="image" src="{{ site.images }}/sli-4.png" width="456" height="381"></p> <p>A few things to note here:</p> <ul> <li><strong>Base Url</strong> is the url of your YouTrack server, which is independent of the actual project.  <li><strong>Committers </strong>is the group in YouTrack that has permission to commit to source code for the particular.  <li><strong>Username </strong>should be a user on YouTrack with Server Admin rights [In an upcoming release this will change to only require Project Admin rights]. </li></ul> <p>&nbsp;</p> <p>5. Switching over to the YouTrack side, the only thing required is the to create the <strong>Committers </strong>group and add the correct users to it. This step isn’t required but it’s good practice to limit the users that can update an issue to those associated with the project.</p> <p>6. A last important step (which is performed once only)&nbsp; is to make sure the REST interface is activated on YouTrack (via the Administration Settings)</p> <p><img style="background-image:none;padding-left:0;padding-right:0;display:inline;padding-top:0;border-width:0;margin:10px 0 0;" title="image" border="0" alt="image" src="{{ site.images }}/sli-5.png" width="721" height="171"></p> <h3>Putting it to work – Hello YouTrack Commands</h3> <p>Now that we have the two systems linked up, how do we actually get this to work? If you’re not familiar with YouTrack, you might not know about an amazing feature it has called <strong>commands</strong>. </p> <p>When most people look at YouTrack, all the see is just another web application with links to click on. However, the true power of YouTrack is in it’s support for commands, which is basically a way of sending it different pieces of text that it understands. This is normally done using the Invoke Command window (Alt+Ctrl+J…yes YouTrack is VERY keyboard friendly):</p> <p><img style="background-image:none;padding-left:0;padding-right:0;display:inline;padding-top:0;border-width:0;margin:10px 0 0;" title="image" border="0" alt="image" src="{{ site.image }}/sli-6.png" width="751" height="277"></p> <p>We start typing text and YouTrack offers us completion and tries to figure out what we’re trying to do. It’s smart enough that it doesn’t need us to spell things out, i.e. instead of having to type “state: fixed assignee: hhariri”, we can just type “fixed hhariri” and it figures out the rest:</p> <p><img style="background-image:none;padding-left:0;padding-right:0;display:inline;padding-top:0;border-width:0;margin:10px 0 0;" title="image" border="0" alt="image" src="http://blogs.jetbrains.com/dotnet/wp-content/uploads/2011/10/image7.png" width="750" height="278"></p> <p>It even remembers recent commands we’ve applied to offer the same combinations to us on the next input.</p> <p>Now if we take this concept of commands and combine that with the <a href="http://www.whatthecommit.com">usually useless commit messages</a> we can actually come up with something useful! We can use the commit messages to send YouTrack commands (in fact, with <a href="http://github.com/JetBrains/YouTrackSharp">YouTrackSharp</a> I’ve started implementing PowerShell commandlets to allow console support for YouTrack too). As such, from our console our Git GUI we can do the following:</p> <p><img style="background-image:none;padding-left:0;padding-right:0;display:inline;padding-top:0;border-width:0;margin:10px 0 0;" title="image" border="0" alt="image" src="http://blogs.jetbrains.com/dotnet/wp-content/uploads/2011/10/image8.png" width="643" height="51"></p> <p>What we’ve done here is provide a command as commit message. We’ve identified the issue we’re going to apply the command to (issue Id prefixed with #) and followed it by the command <strong>Fixed</strong>.</p> <p>Once we do this and push it to GitHub, the Service Hooks in GitHub will now supply this information to YouTrack, which in turn parses the command and applies it to the issue:</p> <p><img style="background-image:none;padding-left:0;padding-right:0;display:inline;padding-top:0;border-width:0;margin:10px 0 0;" title="image" border="0" alt="image" src="http://blogs.jetbrains.com/dotnet/wp-content/uploads/2011/10/image9.png" width="771" height="344"></p> <p>Notice a few things here:</p> <ul> <li>The issue’s history has been updated with the date/time it was resolved along with a comment saying it was emitted via commit by hhariri.  <li>The issue has been actually marked as Fixed.  <li>The Username is clickable. It has correctly identified the username that checked in and mapped that to the YouTrack user. How does it do know that? Simple. <strong>It’s based on the email address. That’s why it’s important to have the correct email address associated with both account</strong>. </li></ul> <h4>Multiple Issues</h4> <p>YouTrack also supports multiple issues being updated via the commit message. In order to do this via the commit message, each issue should be on it’s own line (i.e. when using the console, don’t provide the –m option with the commit and have Git prompt you with an editor to input comments).</p> <p>Also it is important to note that the commit messages are not limited to just the “Fixed” command, but other commands can also be added such as tagging an issue, etc. (comments currently is not supported).</p> <h3>Integrating GitHub (or any VCS) with YouTrack via TeamCity</h3> <p>The second option for integration between YouTrack and GitHub is using TeamCity as the gateway. The advantage to this mechanism (apart from using TeamCity!) is that it now opens the door to more VCS options, including Subersion, Perforce, Git, Hg and all VCS’s that TeamCity supports.</p> <p>The steps to integrate YouTrack and TeamCity are pretty straightforward:</p> <p>1. Click on YouTrack Administration and select TeamCity Integration</p> <p><img style="background-image:none;padding-left:0;padding-right:0;display:inline;padding-top:0;border-width:0;margin:10px 0 0;" title="image" border="0" alt="image" src="http://blogs.jetbrains.com/dotnet/wp-content/uploads/2011/10/image10.png" width="269" height="165"></p> <p>2. Select to Enable TeamCity Integration and click on the Add TeamCity Server link</p> <p><img style="background-image:none;padding-left:0;padding-right:0;display:inline;padding-top:0;border-width:0;margin:10px 0 0;" title="image" border="0" alt="image" src="http://blogs.jetbrains.com/dotnet/wp-content/uploads/2011/10/image11.png" width="500" height="293"></p> <p>Enter the information as described in the dialog box and click Save.</p> <p>3. Once the server is set up, we now need to define the mappings between TeamCity and YouTrack projects. For that, we click on the <strong>define mapping</strong> link:</p> <p><img style="background-image:none;padding-left:0;padding-right:0;display:inline;padding-top:0;border-width:0;margin:10px 0 0;" title="image" border="0" alt="image" src="http://blogs.jetbrains.com/dotnet/wp-content/uploads/2011/10/image12.png" width="535" height="329"></p> <p>We need to define pretty much all the values in the dialog box (which are self-descriptive).</p> <p>In addition to the minimum required settings, we can also define restrictions on which groups have access to viewing issues via the <strong>Permissions</strong> tab, as well define a default command to be set on issues affected by failed builds:</p> <p><img style="background-image:none;padding-left:0;padding-right:0;display:inline;padding-top:0;border-width:0;margin:10px 0 0;" title="image" border="0" alt="image" src="http://blogs.jetbrains.com/dotnet/wp-content/uploads/2011/10/image13.png" width="593" height="242"></p> <p>4. In order to get the User Mapping, YouTrack like before uses the Email address. As such, we need to make sure that our VCS is configured to map to email. This is<strong> done on the TeamCity side under</strong> <strong>My Settings and Tools </strong>which is located under the Username menu [Note we have now switched to TeamCity]:</p> <p><img style="background-image:none;padding-left:0;padding-right:0;display:inline;padding-top:0;border-width:0;margin:10px 0 0;" title="image" border="0" alt="image" src="http://blogs.jetbrains.com/dotnet/wp-content/uploads/2011/10/image14.png" width="578" height="285"></p> <p>We edit the corresponding settings and set the Git roots to use email:</p> <p><img style="background-image:none;padding-left:0;padding-right:0;display:inline;padding-top:0;border-width:0;margin:10px 0 0;" title="image" border="0" alt="image" src="http://blogs.jetbrains.com/dotnet/wp-content/uploads/2011/10/image15.png" width="837" height="45"></p> <p>5. That’s all that is needed in order to get VCS commands working via TeamCity acting as gateway. This will now provide us information and output like the following in YouTrack when sending a fixed command via a commit message:</p> <p><img style="background-image:none;padding-left:0;padding-right:0;display:inline;padding-top:0;border-width:0;margin:10px 0 0;" title="image" border="0" alt="image" src="http://blogs.jetbrains.com/dotnet/wp-content/uploads/2011/10/image16.png" width="948" height="241"></p> <p>With this, a new Tab appears on YouTrack named <strong>TeamCity </strong>which contains information about the commit being made along with a link to the username.</p> <p>We could in essence stop right here. The next step however is to go full force and get some of the added benefits of integrating TeamCity and YouTrack, this time from TeamCity’s side.</p> <p>6. Under <strong>TeamCity Adminsitration </strong>click on <strong>Server Configuration </strong>and then on the <strong>Issue Tracker</strong> tab</p> <p><img style="background-image:none;padding-left:0;padding-right:0;display:inline;padding-top:0;border-width:0;margin:10px 0 0;" title="image" border="0" alt="image" src="http://blogs.jetbrains.com/dotnet/wp-content/uploads/2011/10/image17.png" width="363" height="36"></p> <p>7. We now need to create a new connection by clicking on <strong>Create New Connection, </strong>and entering the following information:</p> <p><img style="background-image:none;padding-left:0;padding-right:0;display:inline;padding-top:0;border-width:0;margin:10px 0 0;" title="image" border="0" alt="image" src="http://blogs.jetbrains.com/dotnet/wp-content/uploads/2011/10/image18.png" width="436" height="435"></p> <p>Once we test the connection we can click <strong>Create</strong> and we’re done. From this point on, we can click on Changes and have drill-down information on issues, link directly to them, etc.</p> <h3>Summary</h3> <p>As we can see, there are two ways to integrate YouTrack and TeamCity. The former requires a little bit less of a setup but is restricted to GitHub (currently). The latter gives us the full benefit of having a tight integration between TeamCity and YouTrack and opens up the door to using any VCS that TeamCity supports.</p> <p>Most importantly however, the purpose of all this is to streamline the process, making issue management simple, non-intrusive and easy to work with.</p> <p>&nbsp;</p> <p>[Note: If you’re an OSS project lead, note that TeamCity and YouTrack Integration are already setup on Codebetter.com. Ping me if you need help setting up your project details to take advantage of what’s been explained here].</p>
