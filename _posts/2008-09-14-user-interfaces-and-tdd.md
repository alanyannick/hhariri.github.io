---
layout: post
title: User Interfaces and TDD
categories: []
tags:
- Design
- Unit Testing
status: publish
type: post
published: true
meta:
  _elasticsearch_indexed_on: '2008-09-14 19:27:00'
comments: true
---
<p>I was having a conversation with a colleague of mine the other day. We were talking about user interfaces and how a sketch of what the interface should look like would help him have a clearer picture of the design. This is not that odd. Many use the same technique to show customers what a possible interface of the end application could look like. The customer can then evaluate whether he/she likes it or prefers to change some detail (and it&#039;s never just a color).&nbsp; </p>  <p>For this purpose, some use designer tools to sketch out a user interface, while others work with development tools hoping that they don&#039;t have to throw out the prototype they printed on paper to show the customer. </p>  <p><a href="/blogengine/image.axd?picture=WindowsLiveWriter/UserInterfacesandTDD_DB40/image_4.png"><img style="border-width:0;" src="/blogengine/image.axd?picture=WindowsLiveWriter/UserInterfacesandTDD_DB40/image_thumb_1.png" border="0" alt="image" width="244" height="147" /></a> </p>  <p>A few decide to make hand-made sketches because they believe showing the customer a WinForm/WPF/PNG can mislead them into believing that the work is nearly finished. If that is the case, educate the customer, don&#039;t blame the &quot;messenger&quot; (be it whatever electronic format). </p>  <p><a href="/blogengine/image.axd?picture=WindowsLiveWriter/UserInterfacesandTDD_DB40/image_2.png"><img style="border-width:0;" src="/blogengine/image.axd?picture=WindowsLiveWriter/UserInterfacesandTDD_DB40/image_thumb.png" border="0" alt="image" width="244" height="168" /></a> </p>  <p>&nbsp;</p>  <p>Irrelevant of the technique used, many see this as a natural process; it&#039;s not peculiar or odd to show a customer what the user interface might look like, despite the fact that behind that user interface there is no functionality. </p>  <p>&nbsp;</p>  <p>&nbsp;</p>  <p>Take the previous search screen. It was displayed to Joe (a fictitious customer) and he decided he didn&#039;t&nbsp; like it . He said he preferred to have to click on a Search Records button which then would pop up another screen where he would fill in the data and then hit Search (Joe was having a bad day). </p>  <p><a href="/blogengine/image.axd?picture=WindowsLiveWriter/UserInterfacesandTDD_DB40/image_6.png"><img style="border-width:0;" src="/blogengine/image.axd?picture=WindowsLiveWriter/UserInterfacesandTDD_DB40/image_thumb_2.png" border="0" alt="image" width="244" height="160" /></a> </p>  <p>&nbsp;</p>  <p>The developer took the feedback into account and designed this particular functionality (not what Joe wanted but what the developer thought Joe really needed). Is there anything wrong with that approach? No. It is perfectly valid. Customer feedback is a good thing, especially when it&#039;s <em>really </em>taken into account.</p>  <p>&nbsp;</p>  <p>Now let&#039;s change roles. Let&#039;s make the customer be the developer and the user interface be a specific class. What is the developers&#039;s user interface to that class? It is the API of the class. It&#039;s the properties and method calls. The requirement of class, much in line with that of the form, is to search for particular customers based on a series of fields and return a list of them. </p>  <p>The developer starts out by designing the API like so:</p>  <div style="font-size:8pt;width:97.5%;cursor:text;max-height:200px;line-height:12pt;font-family:consolas, 'Courier New', courier, monospace;background-color:#f4f4f4;border-color:gray;border-style:solid;border-width:1px;margin:20px 0 10px;padding:4px;">   <div style="font-size:8pt;width:100%;color:black;line-height:12pt;font-family:consolas, 'Courier New', courier, monospace;background-color:#f4f4f4;border-style:none;padding:0;">     <pre style="font-size:8pt;width:100%;color:black;line-height:12pt;font-family:consolas, 'Courier New', courier, monospace;background-color:white;border-style:none;margin:0;padding:0;"><span style="color:#606060;">   1:</span> <span style="color:#0000ff;">public</span> <span style="color:#0000ff;">class</span> CustomerSearch</pre><pre style="font-size:8pt;width:100%;color:black;line-height:12pt;font-family:consolas, 'Courier New', courier, monospace;background-color:#f4f4f4;border-style:none;margin:0;padding:0;"><span style="color:#606060;">   2:</span>     {</pre><pre style="font-size:8pt;width:100%;color:black;line-height:12pt;font-family:consolas, 'Courier New', courier, monospace;background-color:white;border-style:none;margin:0;padding:0;"><span style="color:#606060;">   3:</span>         <span style="color:#0000ff;">public</span> ICollection&lt;Customer&gt; Search(<span style="color:#0000ff;">string</span> name, <span style="color:#0000ff;">string</span> surname) {</pre><pre style="font-size:8pt;width:100%;color:black;line-height:12pt;font-family:consolas, 'Courier New', courier, monospace;background-color:#f4f4f4;border-style:none;margin:0;padding:0;"><span style="color:#606060;">   4:</span>             </pre><pre style="font-size:8pt;width:100%;color:black;line-height:12pt;font-family:consolas, 'Courier New', courier, monospace;background-color:white;border-style:none;margin:0;padding:0;"><span style="color:#606060;">   5:</span>             <span style="color:#008000;">// Call database</span></pre><pre style="font-size:8pt;width:100%;color:black;line-height:12pt;font-family:consolas, 'Courier New', courier, monospace;background-color:#f4f4f4;border-style:none;margin:0;padding:0;"><span style="color:#606060;">   6:</span>             <span style="color:#008000;">// Add search conditions</span></pre><pre style="font-size:8pt;width:100%;color:black;line-height:12pt;font-family:consolas, 'Courier New', courier, monospace;background-color:white;border-style:none;margin:0;padding:0;"><span style="color:#606060;">   7:</span>             <span style="color:#008000;">// Filter records</span></pre><pre style="font-size:8pt;width:100%;color:black;line-height:12pt;font-family:consolas, 'Courier New', courier, monospace;background-color:#f4f4f4;border-style:none;margin:0;padding:0;"><span style="color:#606060;">   8:</span>             <span style="color:#008000;">// return records</span></pre><pre style="font-size:8pt;width:100%;color:black;line-height:12pt;font-family:consolas, 'Courier New', courier, monospace;background-color:white;border-style:none;margin:0;padding:0;"><span style="color:#606060;">   9:</span>&nbsp; </pre><pre style="font-size:8pt;width:100%;color:black;line-height:12pt;font-family:consolas, 'Courier New', courier, monospace;background-color:#f4f4f4;border-style:none;margin:0;padding:0;"><span style="color:#606060;">  10:</span>             <span style="color:#0000ff;">return</span> <span style="color:#0000ff;">new</span> Collection&lt;Customer&gt;();</pre><pre style="font-size:8pt;width:100%;color:black;line-height:12pt;font-family:consolas, 'Courier New', courier, monospace;background-color:white;border-style:none;margin:0;padding:0;"><span style="color:#606060;">  11:</span>         }</pre><pre style="font-size:8pt;width:100%;color:black;line-height:12pt;font-family:consolas, 'Courier New', courier, monospace;background-color:#f4f4f4;border-style:none;margin:0;padding:0;"><span style="color:#606060;">  12:</span>         </pre><pre style="font-size:8pt;width:100%;color:black;line-height:12pt;font-family:consolas, 'Courier New', courier, monospace;background-color:white;border-style:none;margin:0;padding:0;"><span style="color:#606060;">  13:</span>&nbsp; </pre><pre style="font-size:8pt;width:100%;color:black;line-height:12pt;font-family:consolas, 'Courier New', courier, monospace;background-color:#f4f4f4;border-style:none;margin:0;padding:0;"><span style="color:#606060;">  14:</span>     }</pre></div></div><p>[At this point, you must be wondering WTF is this all about? To be honest, I&#039;ve lost track myself, but let&#039;s hold the thought for a moment...]&nbsp;</p><p>The developer, Jack, then starts to use the interface and as he&#039;s a good developer, his first real usage of the interface is a test. As he&#039;s writing the test, he realizes that he&#039;s made a mistake. He&#039;s limited the Search method to two fields, and the customer record has five fields. He then goes back to the class and changes the method to use specifications. </p><div style="font-size:8pt;width:97.5%;cursor:text;max-height:200px;line-height:12pt;font-family:consolas, 'Courier New', courier, monospace;background-color:#f4f4f4;border-color:gray;border-style:solid;border-width:1px;margin:20px 0 10px;padding:4px;"><div style="font-size:8pt;width:100%;color:black;line-height:12pt;font-family:consolas, 'Courier New', courier, monospace;background-color:#f4f4f4;border-style:none;padding:0;"><pre style="font-size:8pt;width:100%;color:black;line-height:12pt;font-family:consolas, 'Courier New', courier, monospace;background-color:white;border-style:none;margin:0;padding:0;"><span style="color:#606060;">   1:</span> <span style="color:#0000ff;">public</span> <span style="color:#0000ff;">class</span> CustomerSearch</pre><pre style="font-size:8pt;width:100%;color:black;line-height:12pt;font-family:consolas, 'Courier New', courier, monospace;background-color:#f4f4f4;border-style:none;margin:0;padding:0;"><span style="color:#606060;">   2:</span> {</pre><pre style="font-size:8pt;width:100%;color:black;line-height:12pt;font-family:consolas, 'Courier New', courier, monospace;background-color:white;border-style:none;margin:0;padding:0;"><span style="color:#606060;">   3:</span>         </pre><pre style="font-size:8pt;width:100%;color:black;line-height:12pt;font-family:consolas, 'Courier New', courier, monospace;background-color:#f4f4f4;border-style:none;margin:0;padding:0;"><span style="color:#606060;">   4:</span>     <span style="color:#0000ff;">public</span> ICollection&lt;Customer&gt; Search(<span style="color:#0000ff;">Criteria criteria</span>) {</pre><pre style="font-size:8pt;width:100%;color:black;line-height:12pt;font-family:consolas, 'Courier New', courier, monospace;background-color:white;border-style:none;margin:0;padding:0;"><span style="color:#606060;">   5:</span>     </pre><pre style="font-size:8pt;width:100%;color:black;line-height:12pt;font-family:consolas, 'Courier New', courier, monospace;background-color:#f4f4f4;border-style:none;margin:0;padding:0;"><span style="color:#606060;">   6:</span>         <span style="color:#008000;">// Call database</span></pre><pre style="font-size:8pt;width:100%;color:black;line-height:12pt;font-family:consolas, 'Courier New', courier, monospace;background-color:white;border-style:none;margin:0;padding:0;"><span style="color:#606060;">   7:</span>         <span style="color:#008000;">// Add search conditions</span></pre><pre style="font-size:8pt;width:100%;color:black;line-height:12pt;font-family:consolas, 'Courier New', courier, monospace;background-color:#f4f4f4;border-style:none;margin:0;padding:0;"><span style="color:#606060;">   8:</span>         <span style="color:#008000;">// Filter records</span></pre><pre style="font-size:8pt;width:100%;color:black;line-height:12pt;font-family:consolas, 'Courier New', courier, monospace;background-color:white;border-style:none;margin:0;padding:0;"><span style="color:#606060;">   9:</span>         <span style="color:#008000;">// return records</span></pre><pre style="font-size:8pt;width:100%;color:black;line-height:12pt;font-family:consolas, 'Courier New', courier, monospace;background-color:#f4f4f4;border-style:none;margin:0;padding:0;"><span style="color:#606060;">  10:</span>&nbsp; </pre><pre style="font-size:8pt;width:100%;color:black;line-height:12pt;font-family:consolas, 'Courier New', courier, monospace;background-color:white;border-style:none;margin:0;padding:0;"><span style="color:#606060;">  11:</span>         <span style="color:#0000ff;">return</span> <span style="color:#0000ff;">new</span> Collection&lt;Customer&gt;();</pre><pre style="font-size:8pt;width:100%;color:black;line-height:12pt;font-family:consolas, 'Courier New', courier, monospace;background-color:#f4f4f4;border-style:none;margin:0;padding:0;"><span style="color:#606060;">  12:</span>     }</pre><pre style="font-size:8pt;width:100%;color:black;line-height:12pt;font-family:consolas, 'Courier New', courier, monospace;background-color:white;border-style:none;margin:0;padding:0;"><span style="color:#606060;">  13:</span>     </pre><pre style="font-size:8pt;width:100%;color:black;line-height:12pt;font-family:consolas, 'Courier New', courier, monospace;background-color:#f4f4f4;border-style:none;margin:0;padding:0;"><span style="color:#606060;">  14:</span>&nbsp; </pre><pre style="font-size:8pt;width:100%;color:black;line-height:12pt;font-family:consolas, 'Courier New', courier, monospace;background-color:white;border-style:none;margin:0;padding:0;"><span style="color:#606060;">  15:</span> }</pre></div></div><p>He then changes the whole code to implement the new functionality. Once he&#039;s happy with the result, he then returns to the test and starts to write the test, happy that he&#039;s accomplished his objective. Problem is, he threw away 2 hours of work by not thoroughly thinking through the requirements. </p><p>But you must be thinking why he hadn&#039;t thought of this beforehand. I mean it is pretty obvious, specially if you&#039;ve done this before. The reason is that you don&#039;t know it all up front. It&#039;s only when you start using something that it &quot;hits&quot; you. Just like customers don&#039;t know everything up front, and they ask for changes as they start to use the program, as developers we don&#039;t know it all up front either. As much design as we try to do on paper, it&#039;s not until we actually start to use our code that we find we need to change our design. </p><p>&nbsp;</p><p>&nbsp;</p><p>Jack could have skipped the first implementation altogether. He could have started using the interface before implementing it completely. Wait a second. How could he use the class before it existed? Well let&#039;s think back. What was Jack&#039;s usage? He started writing his test like so...</p><div style="font-size:8pt;width:97.5%;cursor:text;max-height:200px;line-height:12pt;font-family:consolas, 'Courier New', courier, monospace;background-color:#f4f4f4;border-color:gray;border-style:solid;border-width:1px;margin:20px 0 10px;padding:4px;"><div style="font-size:8pt;width:100%;color:black;line-height:12pt;font-family:consolas, 'Courier New', courier, monospace;background-color:#f4f4f4;border-style:none;padding:0;"><pre style="font-size:8pt;width:100%;color:black;line-height:12pt;font-family:consolas, 'Courier New', courier, monospace;background-color:white;border-style:none;margin:0;padding:0;"><span style="color:#606060;">   1:</span> [Test]</pre><pre style="font-size:8pt;width:100%;color:black;line-height:12pt;font-family:consolas, 'Courier New', courier, monospace;background-color:#f4f4f4;border-style:none;margin:0;padding:0;"><span style="color:#606060;">   2:</span> <span style="color:#0000ff;">public</span> <span style="color:#0000ff;">void</span> CustomerSearch_When_Name_Is_Joe_Should_Return_All_Customers_Named_Joe()</pre><pre style="font-size:8pt;width:100%;color:black;line-height:12pt;font-family:consolas, 'Courier New', courier, monospace;background-color:white;border-style:none;margin:0;padding:0;"><span style="color:#606060;">   3:</span> {</pre><pre style="font-size:8pt;width:100%;color:black;line-height:12pt;font-family:consolas, 'Courier New', courier, monospace;background-color:#f4f4f4;border-style:none;margin:0;padding:0;"><span style="color:#606060;">   4:</span>     CustomerSearch customerSearch = <span style="color:#0000ff;">new</span> CustomerSearch();</pre><pre style="font-size:8pt;width:100%;color:black;line-height:12pt;font-family:consolas, 'Courier New', courier, monospace;background-color:white;border-style:none;margin:0;padding:0;"><span style="color:#606060;">   5:</span>     </pre><pre style="font-size:8pt;width:100%;color:black;line-height:12pt;font-family:consolas, 'Courier New', courier, monospace;background-color:#f4f4f4;border-style:none;margin:0;padding:0;"><span style="color:#606060;">   6:</span>     customerSearch.Search(....    </pre><pre style="font-size:8pt;width:100%;color:black;line-height:12pt;font-family:consolas, 'Courier New', courier, monospace;background-color:white;border-style:none;margin:0;padding:0;"><span style="color:#606060;">   7:</span> }</pre></div></div><p>It&#039;s when he started writing Search when he realized that he only had two fields and that a customer could have up to five fields. This is where he realized he needed more fields, and the initial design of passing in field names was not very scalable. </p><p>&nbsp;</p><p><strong>Welcome to Test Driven Development</strong></p><p>If Jack had started to use his own code before implementing it, he would have realized his shortcomings. Here is where TDD comes into play. TDD is not about writing your unit test first, it&#039;s about designing your code. It&#039;s about you, as the user, defining your user interface. Much in the same way we sketch out a user interface for the customer to give his feedback before we implement the functionality, writing tests is defining the calls you need for your classes before implementing them. As an added value, you end up with a test so that as you re-factor your design to suit your needs, you can validate the functionality.</p><p>&nbsp;</p><p>I know this is old news to many, but still to date, it amazes me at the amount of developers that still think that Test Driven Development is about writing tests first. It is, but not to have your test, but to define your usage. </p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p>
