---
layout: post
title: ReSharper 6 Enhances Razor Support
categories: []
tags:
- ReSharper 6
status: publish
type: post
published: true
meta:
  reddit: a:2:{s:5:"count";i:0;s:4:"time";i:1385704314;}
  _elasticsearch_indexed_on: '2011-04-18 12:31:13'
---
<p><small>Previous posts <a href="http://blogs.jetbrains.com/dotnet/tag/ReSharper-6/">introducing ReSharper 6</a>:</small></p> <p></p> <ul> <li><a href="http://blogs.jetbrains.com/dotnet/2010/12/resharper-6-eap-is-open-details-on-javascript-support/">ReSharper 6 EAP is Open; Details on JavaScript Support</a>  <li><a href="http://blogs.jetbrains.com/dotnet/2011/02/css-support-in-resharper-6/">CSS Support in ReSharper 6</a>  <li><a href="http://blogs.jetbrains.com/dotnet/2011/02/resharper-6-bundles-decompiler-free-standalone-tool-to-follow/">ReSharper 6 Bundles Decompiler, Free Standalone Tool to Follow</a>  <li><a href="http://blogs.jetbrains.com/dotnet/2011/03/resharper-enhances-suggestions-with-explanations/">ReSharper 6 Enhances Suggestions with Explanations</a>  <li><a href="http://blogs.jetbrains.com/dotnet/2011/03/resharper-6-introduces-support-for-javascript-unit-testing/">ReSharper 6 Introduces support for JavaScript Unit Testing with QUnit</a> </li></ul> <p>&nbsp;</p> <p>Razor is the new View Engine introduced by Microsoft in ASP.NET MVC 3. If you have worked with ASPX View Engine, the default one up to version 2 of MVC, you’ll certainly appreciate the simplicity and ease of use of Razor. It makes the flow of HTML vs Code much easier to the eyes and to work with. In ReSharper 6, we are enhancing Razor support in Visual Studio by adding a series of features that will make it even better to work with. </p> <p>&nbsp;</p> <p>&nbsp;</p> <p></p> <h3>Importing Namespaces</h3> <p>ReSharper 6 now automatically imports the specific namespace for your model:</p> <p>&nbsp;</p> <p><a href="http://hhariri.files.wordpress.com/2011/04/image81.png"><img style="border-width:0;" border="0" src="http://hhariri.files.wordpress.com/2011/04/image81_thumb.png" width="569" height="81"></a></p> <p> Hitting Alt+Enter (QuickFix) will add the using statement</p> <p><a href="http://hhariri.files.wordpress.com/2011/04/image1.png"><img style="display:inline;border-width:0;" title="image" border="0" alt="image" src="http://hhariri.files.wordpress.com/2011/04/image_thumb1.png" width="399" height="97"></a> </p> <p>If you prefer to have a fully qualified name, that is:</p> <p><a href="http://hhariri.files.wordpress.com/2011/04/image2.png"><img style="display:inline;border-width:0;" title="image" border="0" alt="image" src="http://hhariri.files.wordpress.com/2011/04/image_thumb2.png" width="568" height="74"></a> </p> <p>you can change the setting under the <strong>Namespace Imports </strong>for C# under <strong>ReSharper Options </strong>(we are looking at the possibility of making this setting independent from general C# settings). </p> <p>&nbsp;</p> <h3>Creating from Usage</h3> <p>If a specific Model does not exist, ReSharper now allows you to create it from usage: </p> <p><a href="http://hhariri.files.wordpress.com/2011/04/image3.png"><img style="display:inline;border-width:0;" title="image" border="0" alt="image" src="http://hhariri.files.wordpress.com/2011/04/image_thumb3.png" width="370" height="104"></a> </p> <p>placing the Model automatically in the Models folder:</p> <p><a href="http://hhariri.files.wordpress.com/2011/04/image4.png"><img style="display:inline;border-width:0;" title="image" border="0" alt="image" src="http://hhariri.files.wordpress.com/2011/04/image_thumb4.png" width="240" height="107"></a> </p> <p>&nbsp;</p> <h3>Helping with Sections</h3> <p>Razor has support for <a href="http://weblogs.asp.net/scottgu/archive/2010/12/30/asp-net-mvc-3-layouts-and-sections-with-razor.aspx">Sections</a>. ReSharper enhances this support by providing Code Completion for Sections. The following shows a section defined in the <em>_layout.cshtml </em>file</p> <p><a href="http://hhariri.files.wordpress.com/2011/04/image5.png"><img style="display:inline;border-width:0;" title="image" border="0" alt="image" src="http://hhariri.files.wordpress.com/2011/04/image_thumb5.png" width="449" height="264"></a> </p> <p>We now get Code Completion for this section in any child page by typing @section</p> <p><a href="http://hhariri.files.wordpress.com/2011/04/image6.png"><img style="display:inline;border-width:0;" title="image" border="0" alt="image" src="http://hhariri.files.wordpress.com/2011/04/image_thumb6.png" width="335" height="134"></a> </p> <p>This provides us not only with Intellisense, but prevents us from making. If we were to type <em>Footeer </em>instead of <em>Footer</em>, ReSharper would highlight this error</p> <p><a href="http://hhariri.files.wordpress.com/2011/04/image7.png"><img style="display:inline;border-width:0;" title="image" border="0" alt="image" src="http://hhariri.files.wordpress.com/2011/04/image_thumb7.png" width="258" height="66"></a></p> <h3>Refactoring</h3> <p>Razor files are made up of code and HTML. As such, you also have Refactoring options that are applicable to both languages. For instance, the picture below depicts a refactoring of an HTML tag:</p> <p><a href="http://hhariri.files.wordpress.com/2011/04/image8.png"><img style="display:inline;border-width:0;" title="image" border="0" alt="image" src="http://hhariri.files.wordpress.com/2011/04/image_thumb8.png" width="450" height="128"></a> </p> <p>whereas the following is a Refactoring of some C# code</p> <p><a href="http://hhariri.files.wordpress.com/2011/04/image9.png"><img style="display:inline;border-width:0;" title="image" border="0" alt="image" src="http://hhariri.files.wordpress.com/2011/04/image_thumb9.png" width="203" height="75"></a> </p> <p>&nbsp;</p> <p>In fact, for ReSharper it doesn’t matter where your C# code starts and where your HTML ends. Just like Razor, ReSharper is capable of providing the correct contextual menus. The following is displayed when prompting the <strong>Refactor This</strong> menu (Shift+Ctrl+R) on the @text variable</p> <p><a href="http://hhariri.files.wordpress.com/2011/04/image10.png"><img style="display:inline;border-width:0;" title="image" border="0" alt="image" src="http://hhariri.files.wordpress.com/2011/04/image_thumb10.png" width="581" height="133"></a> </p> <p>&nbsp;</p> <p>ReSharper also knows how to handle situations where certain Razor constructs are required based on the outcome of a Refactoring option. Take the following code:</p> <p><a href="http://hhariri.files.wordpress.com/2011/04/image11.png"><img style="display:inline;border-width:0;" title="image" border="0" alt="image" src="http://hhariri.files.wordpress.com/2011/04/image_thumb11.png" width="346" height="278"></a> </p> <p>if we are to apply the <em>Invert if </em>refactoring, we would obtain:</p> <p><a href="http://hhariri.files.wordpress.com/2011/04/image12.png"><img style="display:inline;border-width:0;" title="image" border="0" alt="image" src="http://hhariri.files.wordpress.com/2011/04/image_thumb12.png" width="387" height="240"></a> </p> <p>where ReSharper conveniently places the @: which allows mixing of code and plain text.</p> <h3>&nbsp;</h3> <h3>Refactoring Helpers</h3> <p></p> <p>Razor provides support for two types of Helpers, the classic Extension Methods that were available in the ASPX View Engine and Declarative Helpers, which are new to Razor. Declarative helpers are placed in the same file usually and avoid having to define an extension method or pre-post conversions. Given the following code:</p> <p><a href="http://hhariri.files.wordpress.com/2011/04/image13.png"><img style="display:inline;border-width:0;" title="image" border="0" alt="image" src="http://hhariri.files.wordpress.com/2011/04/image_thumb13.png" width="478" height="82"></a></p> <p>&nbsp;</p> <p>we can invoke the <strong>Refactor This </strong>menu (by selecting the input tag line) and select Extract Helper:</p> <p>&nbsp;</p> <p><a href="http://hhariri.files.wordpress.com/2011/04/image14.png"><img style="display:inline;border-width:0;" title="image" border="0" alt="image" src="http://hhariri.files.wordpress.com/2011/04/image_thumb14.png" width="488" height="171"></a> </p> <p>ReSharper prompts us with the following dialog box:</p> <p>&nbsp;</p> <p><a href="http://hhariri.files.wordpress.com/2011/04/image15.png"><img style="display:inline;border-width:0;" title="image" border="0" alt="image" src="http://hhariri.files.wordpress.com/2011/04/image_thumb15.png" width="615" height="534"></a> </p> <p>&nbsp;</p> <p>resulting in the following refactoring</p> <p>&nbsp;</p> <p><a href="http://hhariri.files.wordpress.com/2011/04/image16.png"><img style="display:inline;border-width:0;" title="image" border="0" alt="image" src="http://hhariri.files.wordpress.com/2011/04/image_thumb16.png" width="540" height="163"></a> </p> <p>&nbsp;</p> <p>Currently Helpers are placed inline in the same Razor file, although we are looking at providing common helpers in App_Code folder as well as Extension Methods.</p> <p>&nbsp;</p> <h3>Navigation and Selection </h3> <p>Razor also now supports all the goodness of Navigation and other features of ReSharper such as Extend Selection (Ctrl+W). We can now navigate to and from Razor Views, go to Actions, Controllers:</p> <p>&nbsp;</p> <p><a href="http://hhariri.files.wordpress.com/2011/04/image17.png"><img style="display:inline;border-width:0;" title="image" border="0" alt="image" src="http://hhariri.files.wordpress.com/2011/04/image_thumb17.png" width="642" height="128"></a> </p> <p>as well as User Controls:</p> <p><a href="http://hhariri.files.wordpress.com/2011/04/image18.png"><img style="display:inline;border-width:0;" title="image" border="0" alt="image" src="http://hhariri.files.wordpress.com/2011/04/image_thumb18.png" width="399" height="102"></a> </p> <p>&nbsp;</p> <h3>ReSharper Intellisense</h3> <p>We now get the full benefits of ReSharper Intellisense in Razor</p> <p><a href="http://hhariri.files.wordpress.com/2011/04/image19.png"><img style="display:inline;border-width:0;" title="image" border="0" alt="image" src="http://hhariri.files.wordpress.com/2011/04/image_thumb19.png" width="323" height="218"></a> </p> <p>with Razor-specific entries which allow for easy completion for constructs such as defining Models, Using or Flow statements. Similar to ASPX View Engine, we also get Intellisense for Actions, Controllers and User Controls:</p> <p><a href="http://hhariri.files.wordpress.com/2011/04/image20.png"><img style="display:inline;border-width:0;" title="image" border="0" alt="image" src="http://hhariri.files.wordpress.com/2011/04/image_thumb20.png" width="508" height="89"></a> </p> <p>and just like ASPX, we can also do Create From Usage:</p> <p><a href="http://hhariri.files.wordpress.com/2011/04/image21.png"><img style="display:inline;border-width:0;" title="image" border="0" alt="image" src="http://hhariri.files.wordpress.com/2011/04/image_thumb21.png" width="795" height="164"></a> </p> <p>&nbsp;</p> <p>On the Controller Side, ReSharper 6 now supports the built-in Scaffolding dialog for creating Views:</p> <p>&nbsp;</p> <p><a href="http://hhariri.files.wordpress.com/2011/04/image22.png"><img style="display:inline;border-width:0;" title="image" border="0" alt="image" src="http://hhariri.files.wordpress.com/2011/04/image_thumb22.png" width="488" height="176"></a> </p> <p>&nbsp;</p> <p>which allows us to have the QuickFix of Alt+Enter and take advantage of Visual Studio’s Scaffolding support. </p> <p>&nbsp;</p> <h3>Analysis</h3> <p>Last but not least, ReSharper wouldn’t be ReSharper without its in-depth analysis of source code. And Razor support wouldn’t be complete without it either. In ReSharper 6 we provide full analysis of Razor files, providing you with insight on errors, hints, warnings along with their associated QuickFixes:</p> <p>&nbsp;</p> <p><a href="http://hhariri.files.wordpress.com/2011/04/image23.png"><img style="display:inline;border-width:0;" title="image" border="0" alt="image" src="http://hhariri.files.wordpress.com/2011/04/image_thumb23.png" width="302" height="119"></a> </p> <p>along with full right-margin analysis of the file:</p> <p></p> <p></p> <p><a href="http://hhariri.files.wordpress.com/2011/04/image24.png"><img style="display:inline;border-width:0;" title="image" border="0" alt="image" src="http://hhariri.files.wordpress.com/2011/04/image_thumb24.png" width="693" height="453"></a> </p> <p>&nbsp;</p> <p>&nbsp;</p> <h3></h3> <h3>Summary</h3> <p>As you can see, Razor support in ReSharper 6 is pretty extensive, although it’s not entirely complete yet. We are still in Early Access Program and would love to hear your feedback, whether they are bug reports or suggestions on how to even make it better. <a href="http://confluence.jetbrains.net/display/ReSharper/ReSharper+6.0+Nightly+Builds">Please download the EAP</a> and play with it and report any issues you find on <a href="http://youtrack.jetbrains.net/issues/RSRP">YouTrack</a></p> <p>[IMPORTANT: Please note that some code snippets shown are neither endorsed or recommended. They are merely for demonstration purposes. Code in Views should usually be restricted to View Logic and Rendering]</p>
