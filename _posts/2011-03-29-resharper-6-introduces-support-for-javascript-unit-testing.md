---
layout: post
title: ReSharper 6 Introduces Support for JavaScript Unit Testing with QUnit
categories: []
tags:
- JavaScript
- ReSharper
- ReSharper 6
- Unit Testing
status: publish
type: post
published: true
meta:
  reddit: a:2:{s:5:"count";i:0;s:4:"time";i:1385704316;}
  _elasticsearch_indexed_on: '2011-03-29 11:41:34'
---
<p><small></small></p><small> <p></small></p> <p><small></small></p> <p><small></small></p> <p><small></small></p> <p><small></small></p> <p>In ReShaper 6 we have taken the first step to make it easier for developers to <a href="http://blogs.jetbrains.com/dotnet/2010/12/resharper-6-eap-is-open-details-on-javascript-support/">work with JavaScript</a>. By providing support for analysis, refactoring and code-navigation, we try and remove some of the difficulties developers might encounter when working with this language. Now we're taking the next step!</p> <h3>Running QUnit from ReSharper</h3> <p>When it comes to Unit Testing, even some of the more experienced JavaScript developers tend to not pay too much attention to testing their code. Reasons for this include too much friction, lack of understanding on how to test, what framework to use, etc. Although we can’t solve all of the problems, we are going to try and remove a few of them by providing support for running JavaScript Unit Tests in an easier way with ReSharper. And we are starting this by providing support for <a href="http://docs.jquery.com/Qunit">QUnit</a>, the unit testing framework used by <a href="http://jquery.com">jQuery</a>. You will be able to run QUnit JavaScript tests using the same interfaces you know and love in ReSharper. And the best part of it all, is that it's really easy! Let’s see how.</p> <h3>1. Define the code under test</h3> <p>First step is to have some code that we want to test. This code can be located in the same file where are tests are (not recommended) or in different files. In our case, we want to test some simple calculator operations:</p> <p><a href="http://hhariri.files.wordpress.com/2011/03/image5.png"><img style="border-bottom:0;border-left:0;display:inline;border-top:0;border-right:0;" title="image" border="0" alt="image" src="http://hhariri.files.wordpress.com/2011/03/image_thumb5.png" width="297" height="222"></a> </p> <p>We have placed this code in a file called <em>CodeUnderTest.js</em> but it can be named absolutely anything.</p> <h3>2. Write some tests</h3> <p>Writing Unit Tests in QUnit is pretty straightforward. Whereas with most test frameworks, you’d normally write a class that contains test methods, with QUnit, you call a function <em>test</em> which takes two parameters, a description of the test and the actual code to test, which is passed in as a function:</p> <p><a href="http://hhariri.files.wordpress.com/2011/03/image6.png"><img style="border-bottom:0;border-left:0;display:inline;border-top:0;border-right:0;" title="image" border="0" alt="image" src="http://hhariri.files.wordpress.com/2011/03/image_thumb6.png" width="594" height="270"></a> </p> <p>We place this code in a file called <em>CalculatorTests.js</em> (again, can be named anything). Our project structure now looks like this:</p> <p><a href="http://hhariri.files.wordpress.com/2011/03/image7.png"><img style="border-bottom:0;border-left:0;display:inline;border-top:0;border-right:0;" title="image" border="0" alt="image" src="http://hhariri.files.wordpress.com/2011/03/image_thumb7.png" width="251" height="218"></a> </p> <p>Since our tests are located in a file different to that of our tests, we do need to tell ReSharper which code we are referring to by using a specific reference notation at the top of the test file:</p> <p><a href="http://hhariri.files.wordpress.com/2011/03/image8.png"><img style="border-bottom:0;border-left:0;display:inline;border-top:0;border-right:0;" title="image" border="0" alt="image" src="http://hhariri.files.wordpress.com/2011/03/image_thumb8.png" width="444" height="79"></a> </p> <p>As soon as we add the tests, ReSharper will detect that these are QUnit tests and provide us with the ability to run them by placing the Test Runner menu in the left gutter:</p> <p><a href="http://hhariri.files.wordpress.com/2011/03/image9.png"><img style="border-bottom:0;border-left:0;display:inline;border-top:0;border-right:0;" title="image" border="0" alt="image" src="http://hhariri.files.wordpress.com/2011/03/image_thumb9.png" width="618" height="243"></a> </p> <p>providing us with the ability to run the tests:</p> <p><a href="http://hhariri.files.wordpress.com/2011/03/image10.png"><img style="border-bottom:0;border-left:0;display:inline;border-top:0;border-right:0;" title="image" border="0" alt="image" src="http://hhariri.files.wordpress.com/2011/03/image_thumb10.png" width="325" height="172"></a> </p> <p>We can now run individual tests and get the output displayed in the ReSharper test runner:</p> <p><a href="http://hhariri.files.wordpress.com/2011/03/image11.png"><img style="border-bottom:0;border-left:0;display:inline;border-top:0;border-right:0;" title="image" border="0" alt="image" src="http://hhariri.files.wordpress.com/2011/03/image_thumb11.png" width="552" height="262"></a> </p> <p>Notice how the tests are grouped under "Calculator tests". This is done using the <em>module </em>function which allows grouping of tests:</p> <p><a href="http://hhariri.files.wordpress.com/2011/03/image12.png"><img style="border-bottom:0;border-left:0;display:inline;border-top:0;border-right:0;" title="image" border="0" alt="image" src="http://hhariri.files.wordpress.com/2011/03/image_thumb12.png" width="447" height="345"></a> </p> <p>When the tests are run, ReSharper launches the default system browser which runs the tests and reports the information back to ReSharper. Normally, to run QUnit tests, you would need to create an HTML file that runs the them. This is handled internally by ReSharper, so it's one less step to perform.</p> <p><a href="http://hhariri.files.wordpress.com/2011/03/image13.png"><img style="border-bottom:0;border-left:0;display:inline;border-top:0;border-right:0;" title="image" border="0" alt="image" src="http://hhariri.files.wordpress.com/2011/03/image_thumb13.png" width="548" height="454"></a> </p> <p>If you prefer to use a specific browser to run the tests, you can do so by changing the browser under the ReSharper <strong>Options | Tools | Qunit</strong></p> <p><a href="http://hhariri.files.wordpress.com/2011/03/image14.png"><img style="border-bottom:0;border-left:0;display:inline;border-top:0;border-right:0;" title="image" border="0" alt="image" src="http://hhariri.files.wordpress.com/2011/03/image_thumb14.png" width="385" height="145"></a> </p> <h3>There is still more to come...</h3> <p>Currently, ReSharper is bundling the latest available version of QUnit (at the time of building). We will be adding support in upcoming releases which will allow you to use your own version of QUnit. Also, we will be looking at providing access to the HTML file that ReSharper generates, allowing better support for Continuous Integration environments, as well as the possibility of running the tests from the browser directly.</p> <h3>When can you play with it?</h3> <p>Right now! The public EAP build includes this functionality. Download it from here the <a href="http://confluence.jetbrains.net/display/ReSharper/ReSharper+6.0+Nightly+Builds">ReSharper 6 Early Access</a> page.</p> <p>And as always, feedback welcome. Feel free to provide comments here or <a href="http://youtrack.jetbrains.net/issues/RSRP">using our issue tracking</a> system where you'll not only be able to monitor the status of a feature but also get people to vote for it.</p>
